<div class="page-container">
  
  <header class="page-header">
    <div>
      <h1>Ve√≠culos</h1>
      <p class="subtitle">Frota cadastrada e hist√≥rico de manuten√ß√µes</p>
    </div>
    <button class="btn-primary">
      <span class="icon">+</span> Novo Ve√≠culo
    </button>
  </header>

  <!-- BARRA DE BUSCA -->
  <div class="toolbar">
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input 
        type="text" 
        placeholder="Digite a placa, modelo ou nome do cliente..."
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
      >
    </div>
  </div>

  <!-- LISTA DE VE√çCULOS -->
  <div class="table-container card">
    <table>
      <thead>
        <tr>
          <th>Ve√≠culo / Detalhes</th>
          <th>Placa</th>
          <th>Propriet√°rio</th>
          <th>√öltimo Servi√ßo</th>
          <th>Status</th>
          <th class="actions-col">A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        @for (vehicle of filteredVehicles(); track vehicle.id) {
          <tr>
            <!-- Coluna Modelo/Marca -->
            <td>
              <div class="vehicle-info">
                <div class="brand-logo">{{ vehicle.brand.charAt(0) }}</div>
                <div class="text-data">
                  <strong>{{ vehicle.model }}</strong>
                  <span class="detail-text">{{ vehicle.brand }} ‚Ä¢ {{ vehicle.year }} ‚Ä¢ {{ vehicle.color }}</span>
                </div>
              </div>
            </td>

            <!-- Coluna Placa (Estilo Mercosul/Padr√£o) -->
            <td>
              <div class="plate-badge">
                <div class="plate-header">BRASIL</div>
                <div class="plate-number">{{ vehicle.plate }}</div>
              </div>
            </td>

            <!-- Coluna Dono -->
            <td>
              <div class="owner-link">
                üë§ {{ vehicle.client }}
              </div>
            </td>

            <!-- Coluna Servi√ßo -->
            <td class="service-text">{{ vehicle.lastService }}</td>

            <!-- Coluna Status -->
            <td>
              @if (vehicle.status === 'in-shop') {
                <span class="status-tag in-shop">Na Oficina</span>
              } @else {
                <span class="status-tag delivered">Entregue</span>
              }
            </td>

            <!-- A√ß√µes -->
            <td class="actions-cell">
              <button class="btn-action history" (click)="openHistory(vehicle.plate)" title="Ver Hist√≥rico Completo">
                üìú
              </button>
              <button class="btn-action edit" (click)="editVehicle(vehicle.id)" title="Editar">
                ‚úèÔ∏è
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>

    @if (filteredVehicles().length === 0) {
      <div class="empty-state">
        <p>Nenhum ve√≠culo encontrado com esse termo.</p>
      </div>
    }
  </div>
</div>