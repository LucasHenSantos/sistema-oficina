<div class="dashboard-container">
    <header class="header">
        <h1>Vis√£o Geral</h1>
        <p class="date">Hoje, {{ 'now' | date:'dd/MM/yyyy' }}</p>
    </header>

    <div class="stats-grid">
        
        <div class="card stat-card blue">
            <div class="icon-box">üöó</div>
            <div class="stat-info">
                @if (loading()) {
                    <h3>...</h3>
                } @else {
                    <h3>{{ vehiclesInProgress() }}</h3>
                }
                <p>Ve√≠culos na Oficina</p>
                <span class="subtext">OS em Andamento/Pendente</span>
            </div>
        </div>
        
        <div class="card stat-card green">
            <div class="icon-box">üí∞</div>
            <div class="stat-info">
                @if (loading()) {
                    <h3>...</h3>
                } @else {
                    <h3>{{ monthlyRevenue() | currency:'BRL':'symbol':'1.2-2' }}</h3>
                }
                <p>Faturamento do M√™s</p>
                <span class="subtext">OS Finalizadas ({{ completedOrdersThisMonth().length }})</span>
            </div>
        </div>
        
        <div class="card stat-card red">
            <div class="icon-box">üì¶</div>
            <div class="stat-info">
                <h3>2</h3> 
                <p>Estoque Baixo</p>
                <span class="subtext">Itens Cr√≠ticos</span>
            </div>
        </div>
    </div>

    <div class="content-grid">
        <div class="card activity-card">
            <h2>üîî Atividades Recentes</h2>
            
            @if (loading()) {
                <ul class="activity-list"><li><span class="time">...</span><span class="text">Carregando dados...</span></li></ul>
            } @else if (recentActivities().length === 0) {
                 <div class="empty-state">
                    <p>Nenhuma Ordem de Servi√ßo recente encontrada. üìù</p>
                 </div>
            } @else {
                <ul class="activity-list">
                    @for (activity of recentActivities(); track activity.id) {
                        <li [class]="activity.status | lowercase">
                            <span class="time">{{ formatDate(activity.date) }}</span>
                            <span class="text">
                                OS #{{ activity.id }} - {{ activity.client }} ({{ activity.vehicle }})
                            </span>
                        </li>
                    }
                </ul>
            }
        </div>

        <div class="card actions-card">
            <h2>üöÄ A√ß√µes R√°pidas</h2>
            <div class="actions-buttons">
                <a class="btn-action" routerLink="/veiculos" [queryParams]="{ open: 'true' }">
                    Nova Entrada de Ve√≠culo
                </a>
                
                <a class="btn-action" routerLink="/orcamentos" [queryParams]="{ open: 'true' }">
                    Novo Or√ßamento
                </a>
                
                <a class="btn-action" routerLink="/produtos" [queryParams]="{ open: 'true' }">
                    Novo Produto (Pe√ßa)
                </a>
            </div>
        </div>
    </div>
</div>