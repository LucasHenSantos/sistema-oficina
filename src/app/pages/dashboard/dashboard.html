<div class="dashboard-container">
  <header class="header">
    <h1>VisÃ£o Geral</h1>
    <p class="date">Hoje, {{ 0 | date:'dd/MM/yyyy' }}</p>
  </header>

  <!-- CARDS DE ESTATÃSTICAS -->
  <div class="stats-grid">
    @for (stat of stats(); track stat.title) {
      <div class="card stat-card" [class]="stat.color">
        <div class="icon-box">
          {{ stat.icon }}
        </div>
        <div class="stat-info">
          <h3>{{ stat.value }}</h3>
          <p>{{ stat.title }}</p>
          <span class="subtext">{{ stat.subtext }}</span>
        </div>
      </div>
    }
  </div>

  <div class="recent-activities">
    <h2>Atividades Recentes</h2>
    @if (loading()) {
        <p>Carregando dados...</p>
    } @else {
        @for (activity of recentActivities(); track activity.id) {
            <div class="activity-item">
                <div class="info">
                    <strong>OS #{{ activity.id }}</strong> - {{ activity.client }} ({{ activity.vehicle }})
                </div>
                <div class="status-badge status-{{ activity.status }}">
                    {{ formatStatus(activity.status) }}
                </div>
                <div class="date-value">
                    {{ formatDate(activity.date) }}
                </div>
            </div>
        }
    }
</div>

  <!-- SEÃ‡ÃƒO INFERIOR -->
  <div class="content-grid">
    <!-- Atividades Recentes -->
    <div class="card activity-card">
      <h2>ðŸ”” Atividades Recentes</h2>
      <ul class="activity-list">
        @for (item of recentActivity(); track item.time) {
          <li [class]="item.type">
            <span class="time">{{ item.time }}</span>
            <span class="text">{{ item.text }}</span>
          </li>
        }
      </ul>
    </div>

    <div class="kpi-cards">
    <div class="card">
        <h3>VeÃ­culos na Oficina</h3>
        <p class="data-value">{{ vehiclesInProgress() }}</p>
    </div>
    
    <div class="card">
        <h3>Faturamento MÃªs</h3>
        <p class="data-value">{{ monthlyRevenue() | currency:'BRL' }}</p>
    </div>
    
    </div>

    <!-- Acesso RÃ¡pido -->
    <div class="card actions-card">
      <h2>ðŸš€ AÃ§Ãµes RÃ¡pidas</h2>
      <div class="actions-buttons">
        <!-- AGORA: Passamos { open: true } para avisar que queremos o modal aberto -->
        <button class="btn-action" (click)="navigateTo('/veiculos', { open: 'true' })">
          Nova Entrada de VeÃ­culo
        </button>
        
        <button class="btn-action" (click)="navigateTo('/orcamentos', { open: 'true' })">
          Novo OrÃ§amento
        </button>
        
        <button class="btn-action" (click)="navigateTo('/produtos', { open: 'true' })">
          Novo Produto (PeÃ§a)
        </button>
      </div>
    </div>
  </div>
</div>