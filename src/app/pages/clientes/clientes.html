<div class="page-container">
  
  <!-- CABEÃ‡ALHO DA PÃGINA -->
  <header class="page-header">
    <div>
      <h1>Clientes</h1>
      <p class="subtitle">Gerencie contatos e histÃ³rico de atendimentos</p>
    </div>
    <button class="btn-primary">
      <span class="icon">+</span> Novo Cliente
    </button>
  </header>

  <!-- BARRA DE FERRAMENTAS (BUSCA) -->
  <div class="toolbar">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input 
        type="text" 
        placeholder="Buscar por nome, telefone ou modelo do carro..."
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
      >
    </div>
    <!-- Filtros rÃ¡pidos (futuro) -->
    <div class="filter-actions">
      <button class="btn-icon" title="Filtrar">ğŸŒªï¸</button>
      <button class="btn-icon" title="Exportar">ğŸ“„</button>
    </div>
  </div>

  <!-- TABELA DE CLIENTES -->
  <div class="table-container card">
    <table>
      <thead>
        <tr>
          <th>Cliente</th>
          <th>VeÃ­culos</th>
          <th>Contato</th>
          <th>Status</th>
          <th>Ãšltima Visita</th>
          <th class="actions-col">AÃ§Ãµes RÃ¡pidas</th>
        </tr>
      </thead>
      <tbody>
        @for (client of filteredClients(); track client.id) {
          <tr>
            <!-- Coluna Nome (com Avatar fictÃ­cio) -->
            <td class="client-info">
              <div class="avatar">{{ client.name.charAt(0) }}</div>
              <div class="text-data">
                <strong>{{ client.name }}</strong>
                <span class="id-text">#{{ client.id }}</span>
              </div>
            </td>

            <!-- Coluna VeÃ­culos -->
            <td>
              <div class="cars-list">
                @for (car of client.cars; track car) {
                  <span class="car-badge">{{ car }}</span>
                }
              </div>
            </td>

            <!-- Coluna Contato -->
            <td>{{ client.phone }}</td>

            <!-- Coluna Status -->
            <td>
              <span class="status-badge" [class]="client.status">
                {{ client.statusLabel }}
              </span>
            </td>

            <!-- Coluna Data -->
            <td>{{ client.lastVisit }}</td>

            <!-- Coluna AÃ§Ãµes -->
            <td class="actions-cell">
              <button class="btn-action whatsapp" (click)="openWhatsApp(client.phone)" title="Mandar Zap">
                ğŸ“±
              </button>
              <button class="btn-action new-os" (click)="newOrder(client.name)" title="Abrir Nova OS">
                ğŸ”§
              </button>
              <button class="btn-action edit" title="Editar Cadastro">
                âœï¸
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
    
    <!-- Estado Vazio (se a busca nÃ£o achar nada) -->
    @if (filteredClients().length === 0) {
      <div class="empty-state">
        <p>Nenhum cliente encontrado.</p>
      </div>
    }
  </div>

</div>